<!-- Generated by andromda-andromda cartridge (angular\app\view\view.component.html.vsl) DO NOT EDIT! -->
<div class="card container mb-4" #target>
	<div class="card-body">
		<form [formGroup]="editComplaintForm">

			<section>
				<div class="text-end">
					<button type="button" (click)="editComplaintSearch()" class="btn btn-primary">
						<span translate>search</span>
					</button>
				</div>
			</section>

			<div *ngIf="loading | async">
				<app-loader [isLoading]="loading | async"></app-loader>
			</div>
			<div *ngIf="success | async" class="alert alert-success" role="alert">
				<div *ngFor="let message of messages | async">
					{{ message }}
				</div>
			</div>
			<div *ngIf="error | async" class="alert alert-danger" role="alert">
				<div *ngFor="let message of messages | async">
					{{ message }}
				</div>
			</div>
			<div formGroupName="complaint">
				<div class="mb-3">
					<label id="complaintStatus_label" class="col-sm-2 col-form-label" for="complaintStatus"><span
							translate>status</span>*</label>
					<select id="complaintStatus" class="form-select" formControlName="status" *ngIf="loggedIn; else notLoggedIn">
						<option></option>
						<option *ngFor="let key of statusOptions" [value]="key">
							{{ statusT[key] }}
						</option>
					</select>
					<ng-template #notLoggedIn>
						<label>{{complaintStatus}}</label>
					</ng-template>
				</div>
				<div class="mb-3">
					<label id="complaintComplaintId_label" class="col-sm-2 col-form-label"
						for="complaintComplaintId"><span translate>complaint.id</span></label>
					<!-- <input type="text" id="complaintComplaintId" class="form-control" name="complaintId"
						formControlName="complaintId" /> -->
						<label for="complaintId_label_value">{{complaint?.complaintId}}</label>
				</div>
				<fieldset formGroupName="licensee">
					<div class="row mb-3">
						<label id="complaintLicensee_label" for="complaintLicenseeLicenseeName"
							class="col-form-label"><span translate>licensee.name</span>*</label>
						<div class="col-sm-12">
							<div class="input-group">
								<input type="text" readonly class="form-control" id="complaintLicenseeLicenseeName"
									value="{{complaintLicensee?.licenseeName }}" disabled>
								<button type="button" (click)="complaintLicenseeAddDialog()"
									class="btn btn-outline-primary" data-bs-toggle="modal"
									data-bs-target="#complaintLicenseeModal">
									<mat-icon>add_box</mat-icon>
								</button>
								<button type="button" (click)="complaintLicenseeClear()"
									class="btn btn-outline-primary">
									<mat-icon>clear</mat-icon>
								</button>
							</div>
						</div>
					</div>
					<div *ngIf="editComplaintForm.invalid && complaintLicenseeControl.invalid && (complaintLicenseeControl.dirty || complaintLicenseeControl.touched)"
						class="alert alert-danger" role="alert">
						<div *ngIf="complaintLicenseeControl.errors['required']">
							<span translate>licensee.required</span>
						</div>
					</div>
				</fieldset>
				<div class="mb-3">
					<label id="complaintFirstName_label" class="col-sm-2 col-form-label" for="complaintFirstName"><span
							translate>first.name</span>*</label>
					<input type="text" id="complaintFirstName" class="form-control" name="firstName"
						formControlName="firstName" required />
					<div *ngIf="editComplaintForm.invalid && complaintFirstNameControl.invalid && (complaintFirstNameControl.dirty || complaintFirstNameControl.touched)"
						class="alert alert-danger" role="alert">
						<div *ngIf="complaintFirstNameControl.errors['required']">
							<span translate>first.name.required</span>
						</div>
					</div>
				</div>
				<div class="mb-3">
					<label id="complaintSurname_label" class="col-sm-2 col-form-label" for="complaintSurname"><span
							translate>surname</span>*</label>
					<input type="text" id="complaintSurname" class="form-control" name="surname"
						formControlName="surname" required />
					<div *ngIf="editComplaintForm.invalid && complaintSurnameControl.invalid && (complaintSurnameControl.dirty || complaintSurnameControl.touched)"
						class="alert alert-danger" role="alert">
						<div *ngIf="complaintSurnameControl.errors['required']">
							<span translate>surname.required</span>
						</div>
					</div>
				</div>
				<div class="mb-3">
					<label id="complaintEmail_label" class="col-sm-2 col-form-label" for="complaintEmail"><span
							translate>email</span>*</label>
					<input type="text" id="complaintEmail" class="form-control" name="email" formControlName="email"
						required />
					<div *ngIf="editComplaintForm.invalid && complaintEmailControl.invalid && (complaintEmailControl.dirty || complaintEmailControl.touched)"
						class="alert alert-danger" role="alert">
						<div *ngIf="complaintEmailControl.errors['required']">
							<span translate>email.required</span>
						</div>
						<div *ngIf="complaintEmailControl.errors['email']">
							<span translate>email.format.error</span>
						</div>
					</div>
				</div>
				<div class="mb-3">
					<label id="complaintSubject_label" class="col-sm-2 col-form-label" for="complaintSubject"><span
							translate>subject</span>*</label>
					<input type="text" id="complaintSubject" class="form-control" name="subject"
						formControlName="subject" required />
					<div *ngIf="editComplaintForm.invalid && complaintSubjectControl.invalid && (complaintSubjectControl.dirty || complaintSubjectControl.touched)"
						class="alert alert-danger" role="alert">
						<div *ngIf="complaintSubjectControl.errors['required']">
							<span translate>subject.required</span>
						</div>
					</div>
				</div>
				<div class="mb-3">
					<label id="complaintDetails_label" class="col-sm-2 col-form-label" for="complaintDetails"><span
							translate>details</span>*</label>
					<textarea id="complaintDetails" class="form-control" formControlName="details" required></textarea>
					<div *ngIf="editComplaintForm.invalid && complaintDetailsControl.invalid && (complaintDetailsControl.dirty || complaintDetailsControl.touched)"
						class="alert alert-danger" role="alert">
						<div *ngIf="complaintDetailsControl.errors['required']">
							<span translate>details.required</span>
						</div>
					</div>
				</div>
				<div class="mb-3">
					<label id="complaintAssignedTo_label" class="col-sm-2 col-form-label"
						for="complaintAssignedTo"><span translate>assigned.to</span></label>
					<input type="text" id="complaintAssignedTo" class="form-control" name="assignedTo"
						formControlName="assignedTo" *ngIf="loggedIn; else notLoggedIn"/>
					<ng-template #notLoggedIn>
						<label> {{ complaintAssignedTo }} </label>
					</ng-template>
				</div>
				<div class="mb-3">
					<label id="complaintCreatedDate_label" class="col-sm-2 col-form-label"
						for="complaintCreatedDate"><span translate>created.date</span></label>
					<!-- <input type="date" id="complaintCreatedDate" class="form-control" formControlName="createdDate"
						required navigator="true" showOn="button" />
					<div *ngIf="editComplaintForm.invalid && complaintCreatedDateControl.invalid && (complaintCreatedDateControl.dirty || complaintCreatedDateControl.touched)"
						class="alert alert-danger" role="alert">
						<div *ngIf="complaintCreatedDateControl.errors['required']">
							<span translate>created.date.required</span>
						</div>
					</div> -->
					<label for="complaintCreatedDate_label_value">{{complaint?.createdDate}}</label>
				</div>
				<div class="mb-4">
					<label id="complaintUpdatedDate_label" class="col-sm-2 col-form-label"
						for="complaintUpdatedDate"><span translate>updated.date</span></label>
					<!-- <input type="date" id="complaintUpdatedDate" class="form-control" formControlName="updatedDate"
						navigator="true" showOn="button" /> -->
						<label for="ComplaintUpdatedDate_label_value">{{complaint?.updatedDate}}</label>
				</div>
				<div class="text-end mb-3">
					<button type="button" (click)="editComplaintSave()" (click)="scroll(target)"
						class="btn btn-outline-primary">
						<span translate>save</span>
					</button>
					<button type="button" (click)="editComplaintDelete()" (click)="scroll(target)"
						class="btn btn-outline-primary" *ngIf="complaintId && deleteUnrestricted">
						<span translate>delete</span>
					</button>
					<!-- <button type="button" (click)="editComplaintNewDocument()" class="btn btn-outline-primary">
						<span translate>new.document</span>
					</button>
					<button type="button" (click)="editComplaintReply()" class="btn btn-outline-primary">
						<span translate>reply</span>
					</button> -->
					<button type="button" (click)="editComplaintFormReset()" (click)="scroll(target)"
						class="btn btn-outline-primary"><span translate>reset</span></button>
				</div>
				<mat-tab-group animationDuration="0ms" class="view-tabs" *ngIf="complaintId">
					<mat-tab label="{{'documents' | translate}}" *ngIf="false">
						<div>
							<button type="button" (click)="editComplaintNewDocument()" class="btn btn-primary my-2">
								<mat-icon>add_box</mat-icon>
							</button>
							<mat-table matSort [dataSource]="complaintDocuments" #documentsSort="matSort"
								class="table table-bordered table-striped" style="width: 100%;">
								<ng-container matColumnDef="actions">
									<mat-header-cell *matHeaderCellDef translate>actions</mat-header-cell>
									<mat-cell *matCellDef="let row; index as i">
										<button type="button" color="accent" (click)="deleteFromComplaintDocuments(i)"
											class="btn btn-info">
											<mat-icon>delete</mat-icon>
										</button>
										<button type="button" color="accent" (click)="doEditComplaintDocuments(row)"
											class="btn btn-info">
											<mat-icon>edit</mat-icon>
										</button>
									</mat-cell>
								</ng-container>
								<ng-container matColumnDef="id">
									<mat-header-cell *matHeaderCellDef translate>id</mat-header-cell>
									<mat-cell *matCellDef="let row"> {{ row?.id }} </mat-cell>
								</ng-container>
								<ng-container matColumnDef="documentId">
									<mat-header-cell *matHeaderCellDef translate>document.id</mat-header-cell>
									<mat-cell *matCellDef="let row"> {{ row?.documentId }} </mat-cell>
								</ng-container>
								<ng-container matColumnDef="documentType.name">
									<mat-header-cell *matHeaderCellDef translate>document.type.name</mat-header-cell>
									<mat-cell *matCellDef="let row"> {{ row?.documentType?.name }} </mat-cell>
								</ng-container>
								<ng-container matColumnDef="documentName">
									<mat-header-cell *matHeaderCellDef translate>document.name</mat-header-cell>
									<mat-cell *matCellDef="let row"> {{ row?.documentName }} </mat-cell>
								</ng-container>
								<mat-header-row *matHeaderRowDef="complaintDocumentsModalColumns"></mat-header-row>
								<mat-row *matRowDef="let row; columns: complaintDocumentsModalColumns;"></mat-row>
							</mat-table>
							<mat-paginator #complaintDocumentsPaginator="matPaginator" [pageSize]="10"
								[pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
						</div>
					</mat-tab>
					<mat-tab label="{{'complaint.replies' | translate}}">
						<div>
							<button type="button" (click)="editComplaintReply()" class="btn btn-primary my-2">
								<mat-icon>add_box</mat-icon>
							</button>
							<!-- <mat-table matSort [dataSource]="complaintComplaintReplies" #complaintRepliesSort="matSort"
								class="table table-bordered table-striped" style="width: 100%;">
								<ng-container matColumnDef="actions">
									<mat-header-cell *matHeaderCellDef translate>actions</mat-header-cell>
									<mat-cell *matCellDef="let row; index as i">
										<button type="button" color="accent"
											(click)="deleteFromComplaintComplaintReplies(i)" class="btn btn-info">
											<mat-icon>delete</mat-icon>
										</button>
										<button type="button" color="accent"
											(click)="doEditComplaintComplaintReplies(row)" class="btn btn-info">
											<mat-icon>edit</mat-icon>
										</button>
									</mat-cell>
								</ng-container>
								<ng-container matColumnDef="id">
									<mat-header-cell *matHeaderCellDef translate>id</mat-header-cell>
									<mat-cell *matCellDef="let row"> {{ row?.id }} </mat-cell>
								</ng-container>
								<ng-container matColumnDef="date">
									<mat-header-cell *matHeaderCellDef translate>date</mat-header-cell>
									<mat-cell *matCellDef="let row"> {{ row?.date }} </mat-cell>
								</ng-container>
								<ng-container matColumnDef="replyUser">
									<mat-header-cell *matHeaderCellDef translate>reply.user</mat-header-cell>
									<mat-cell *matCellDef="let row"> {{ row?.replyUser }} </mat-cell>
								</ng-container>
								<mat-header-row *matHeaderRowDef="complaintComplaintRepliesModalColumns">
								</mat-header-row>
								<mat-row *matRowDef="let row; columns: complaintComplaintRepliesModalColumns;">
								</mat-row>
							</mat-table>
							<mat-paginator #complaintComplaintRepliesPaginator="matPaginator" [pageSize]="10"
								[pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator> -->

							<div class="list-group" *ngFor="let reply of complaintComplaintReplies">
								<a class="list-group-item list-group-item-action mb-2 px-5" aria-current="true">
									<div class="d-flex w-100 justify-content-between">
										<h6 class="mb-2 fw-bold">{{reply.replyUser}}</h6>
										<small class="text-warning">{{reply.date}}</small>
									</div>
									<p class="mb-1">
										{{reply.reply}}
									</p>
									<div class="action">
										<span class="badge bg-primary" type="button" (click)="doEditComplaintComplaintReplies(reply.id)"><i class="fa fa-pencil" aria-hidden="true"></i>  Edit</span>
										<span class="badge bg-danger" type="button" (click)="deleteFromComplaintComplaintReplies(reply.id)"><i class="fa fa-trash" aria-hidden="true"></i>  Delete</span>
									</div>
								</a>
							</div>
						</div>
					</mat-tab>
				</mat-tab-group>
			</div>
		</form>
	</div>
</div>



<div class="modal fade" id="complaintDocumentsModal" tabindex="-1" aria-labelledby="complaintDocumentsLabel"
	aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="complaintDocumentsAddLabel" translate>
					action.select
					<span translate>documents</span>
				</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div>
					<form>
						<div>
							<mat-form-field>
								<mat-label translate>search</mat-label>
								<input matInput type="text" [formControl]="complaintDocumentsSearchField"
									id="complaintDocumentsSearchField" />
							</mat-form-field>
						</div>
						<button type="button" (click)="complaintDocumentsSearch()" class="btn btn-primary">
							<mat-icon>search</mat-icon>
						</button>
					</form>
				</div>
				<mat-table matSort [dataSource]="complaintDocumentsDataSource" #complaintDocumentsModalSort="matSort"
					class="table table-bordered" style="width: 100%;">
					<ng-container matColumnDef="actions">
						<mat-header-cell *matHeaderCellDef translate>actions</mat-header-cell>
						<mat-cell *matCellDef="let row; let i=index">
							<mat-checkbox (change)="complaintDocumentsSelected($event, row)"></mat-checkbox>
						</mat-cell>
					</ng-container>
					<ng-container matColumnDef="id">
						<mat-header-cell *matHeaderCellDef translate>id</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.id }} </mat-cell>
					</ng-container>
					<ng-container matColumnDef="documentId">
						<mat-header-cell *matHeaderCellDef translate>document.id</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.documentId }} </mat-cell>
					</ng-container>
					<ng-container matColumnDef="documentType.name">
						<mat-header-cell *matHeaderCellDef translate>document.type.name</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.documentType?.name }} </mat-cell>
					</ng-container>
					<ng-container matColumnDef="documentName">
						<mat-header-cell *matHeaderCellDef translate>document.name</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.documentName }} </mat-cell>
					</ng-container>
					<mat-header-row *matHeaderRowDef="complaintDocumentsModalColumns"></mat-header-row>
					<mat-row *matRowDef="let row; columns: complaintDocumentsModalColumns;"></mat-row>
				</mat-table>
				<mat-paginator #complaintDocumentsModalPaginator="matPaginator" [pageSize]="10"
					[pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" translate>action.close</button>
				<button type="button" class="btn btn-primary" (click)="addSelectedComplaintDocuments()"
					data-bs-dismiss="modal" translate>save</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="complaintComplaintRepliesModal" tabindex="-1"
	aria-labelledby="complaintComplaintRepliesLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="complaintComplaintRepliesAddLabel" translate>
					action.select
					<span translate>complaint.replies</span>
				</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div>
					<form>
						<div>
							<mat-form-field>
								<mat-label translate>search</mat-label>
								<input matInput type="text" [formControl]="complaintComplaintRepliesSearchField"
									id="complaintComplaintRepliesSearchField" />
							</mat-form-field>
						</div>
						<button type="button" (click)="complaintComplaintRepliesSearch()" class="btn btn-primary">
							<mat-icon>search</mat-icon>
						</button>
					</form>
				</div>
				<mat-table matSort [dataSource]="complaintComplaintRepliesDataSource"
					#complaintComplaintRepliesModalSort="matSort" class="table table-bordered" style="width: 100%;">
					<ng-container matColumnDef="actions">
						<mat-header-cell *matHeaderCellDef translate>actions</mat-header-cell>
						<mat-cell *matCellDef="let row; let i=index">
							<mat-checkbox (change)="complaintComplaintRepliesSelected($event, row)"></mat-checkbox>
						</mat-cell>
					</ng-container>
					<ng-container matColumnDef="id">
						<mat-header-cell *matHeaderCellDef translate>id</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.id }} </mat-cell>
					</ng-container>
					<ng-container matColumnDef="date">
						<mat-header-cell *matHeaderCellDef translate>date</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.date }} </mat-cell>
					</ng-container>
					<ng-container matColumnDef="replyUser">
						<mat-header-cell *matHeaderCellDef translate>reply.user</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.replyUser }} </mat-cell>
					</ng-container>
					<mat-header-row *matHeaderRowDef="complaintComplaintRepliesModalColumns"></mat-header-row>
					<mat-row *matRowDef="let row; columns: complaintComplaintRepliesModalColumns;"></mat-row>
				</mat-table>
				<mat-paginator #complaintComplaintRepliesModalPaginator="matPaginator" [pageSize]="10"
					[pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" translate>action.close</button>
				<button type="button" class="btn btn-primary" (click)="addSelectedComplaintComplaintReplies()"
					data-bs-dismiss="modal" translate>save</button>
			</div>
		</div>
	</div>
</div>

<!-- Modal for licensee -->
<div class="modal fade" id="complaintLicenseeModal" tabindex="-1" aria-labelledby="complaintLicenseeLabel"
	aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="complaintLicenseeAddLabel" translate>
					action.select
					<span translate>licensee</span>
				</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div>
					<form>
						<div>
							<mat-form-field>
								<mat-label translate>search</mat-label>
								<input matInput type="text" [formControl]="complaintLicenseeSearchField"
									id="complaintLicenseeSearchField" />
							</mat-form-field>
						</div>
						<button type="button" (click)="complaintLicenseeSearch()" class="btn btn-primary">
							<mat-icon>search</mat-icon>
						</button>
					</form>
				</div>
				<mat-table matSort [dataSource]="complaintLicenseesDataSource" #complaintLicenseeModalSort="matSort"
					class="table table-bordered" style="width: 100%;">
					<ng-container matColumnDef="actions">
						<mat-header-cell *matHeaderCellDef translate>actions</mat-header-cell>
						<mat-cell *matCellDef="let row; let i=index">
							<mat-radio-group (change)="complaintLicenseeSelected($event, row)">
								<mat-radio-button [value]="row" [checked]='complaintLicenseeSelect.id === row?.id'>
								</mat-radio-button>
							</mat-radio-group>
						</mat-cell>
					</ng-container>
					<ng-container matColumnDef="id">
						<mat-header-cell *matHeaderCellDef translate>id</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.id }} </mat-cell>
					</ng-container>
					<ng-container matColumnDef="uin">
						<mat-header-cell *matHeaderCellDef translate>uin</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.uin }} </mat-cell>
					</ng-container>
					<ng-container matColumnDef="licenseeName">
						<mat-header-cell *matHeaderCellDef translate>licensee.name</mat-header-cell>
						<mat-cell *matCellDef="let row"> {{ row?.licenseeName }} </mat-cell>
					</ng-container>
					<mat-header-row *matHeaderRowDef="complaintLicenseeModalColumns"></mat-header-row>
					<mat-row *matRowDef="let row; columns: complaintLicenseeModalColumns;"></mat-row>
				</mat-table>
				<mat-paginator #complaintLicenseeModalPaginator="matPaginator" [pageSize]="10"
					[pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" translate>action.close</button>
				<button type="button" class="btn btn-primary" (click)="addSelectedComplaintLicensee()"
					data-bs-dismiss="modal" translate>save</button>
			</div>
		</div>
	</div>
</div>