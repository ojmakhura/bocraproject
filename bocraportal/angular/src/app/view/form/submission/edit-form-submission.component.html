<!-- Generated by andromda-andromda cartridge (angular\app\view\view.component.html.vsl) DO NOT EDIT! -->
<div class="card container px-5 py-2 bg-light">
	<div class="card-body">
	  <form [formGroup]="editFormSubmissionForm">
		<section>
		  <div class="text-end">
			
			<button type="button" color="accent" (click)="editFormSubmissionSearch()" class="btn btn-primary">
			  <span translate>search</span>
			</button>
			
			
		  </div>
		</section>
		<br>
		<div *ngIf="success | async" class="alert alert-success" role="alert">
		  <div *ngFor="let message of messages | async">
			{{ message }}
		  </div>
		</div>
		<div *ngIf="error | async" class="alert alert-danger" role="alert">
		  <div *ngFor="let message of messages | async">
			{{ message }}
		  </div>
		</div>
		<div formGroupName="formSubmission">
		  <fieldset class="mb-3" formGroupName="form">
			<!-- <legend id="formSubmissionForm_label" class="col-sm-2 col-form-label" for="formSubmissionForm"><span translate>form</span>*</legend> -->
			<!-- <div class="col my-3 view-buttons">
					<button type="button" (click)="formSubmissionFormAddDialog()" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#formSubmissionFormModal">
						<mat-icon>add_box</mat-icon>
					</button>
					<button type="button" (click)="formSubmissionFormClear()" class="btn btn-primary">
						<mat-icon>clear</mat-icon>
					</button>
				</div> -->
			<!-- <div class="row mb-3">
					<label for="formSubmissionFormId" class="col-sm-2 col-form-label" translate>id</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="formSubmissionFormId" value="{{formSubmissionForm?.id}}" disabled>
					</div>
				</div> -->
			<!-- <div class="row mb-3">
					<label for="formSubmissionFormCode" class="col-sm-2 col-form-label" translate>code</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="formSubmissionFormCode" value="{{formSubmissionForm?.code}}" disabled>
					</div>
				</div> -->
			<div class="row mb-3">
			  <label for="formSubmissionFormFormName" class="col-sm-2 col-form-label" translate>form.name</label>
			  <div class="col-sm-10">
				<input type="text" class="form-control" id="formSubmissionFormFormName"
				  value="{{ formSubmissionForm?.formName }}" disabled />
			  </div>
			</div>
			<div *ngIf="
				editFormSubmissionForm.invalid &&
				formSubmissionFormControl.invalid &&
				(formSubmissionFormControl.dirty || formSubmissionFormControl.touched)
			  " class="alert alert-danger" role="alert">
			  <div *ngIf="formSubmissionFormControl.errors['required']">
				<span translate>form.required</span>
			  </div>
			</div>
		  </fieldset>
		  <fieldset class="mb-3" formGroupName="period">
			<!-- <legend id="formSubmissionPeriod_label" class="col-sm-2 col-form-label" for="formSubmissionPeriod"><span translate>period</span>*</legend>
						<div class="col my-3 view-buttons"  *ngIf="!formSubmissionId">
							<button type="button" (click)="formSubmissionPeriodAddDialog()" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#formSubmissionPeriodModal">
								<mat-icon>add_box</mat-icon>
							</button>
							<button type="button" (click)="formSubmissionPeriodClear()" class="btn btn-primary">
								<mat-icon>clear</mat-icon>
							</button>
						</div> -->
			<!-- <div class="row mb-3">
							<label for="formSubmissionPeriodId" class="col-sm-2 col-form-label" translate>id</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="formSubmissionPeriodId" value="{{formSubmissionPeriod?.id}}" disabled>
							</div>
						</div> -->
			<div class="row mb-3">
			  <label for="formSubmissionPeriodPeriodName" class="col-sm-2 col-form-label" translate>period.name</label>
			  <div class="col-sm-10">
				<input type="text" class="form-control" id="formSubmissionPeriodPeriodName"
				  value="{{ formSubmissionPeriod?.periodName }}" disabled />
			  </div>
			</div>
			<!-- <div class="row mb-3">
							<label for="formSubmissionPeriodPeriodStart" class="col-sm-2 col-form-label" translate>period.start</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="formSubmissionPeriodPeriodStart" value="{{formSubmissionPeriod?.periodStart}}" disabled>
							</div>
						</div> -->
			<!-- <div class="row mb-3">
							<label for="formSubmissionPeriodPeriodEnd" class="col-sm-2 col-form-label" translate>period.end</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="formSubmissionPeriodPeriodEnd" value="{{formSubmissionPeriod?.periodEnd}}" disabled>
							</div>
						</div> -->
			<!-- <div *ngIf="editFormSubmissionForm.invalid && formSubmissionPeriodControl.invalid && (formSubmissionPeriodControl.dirty || formSubmissionPeriodControl.touched)" class="alert alert-danger" role="alert">
							<div *ngIf="formSubmissionPeriodControl.errors['required']">
								<span translate>period.required</span>
							</div>
						</div> -->
		  </fieldset>
		  <fieldset class="mb-3" formGroupName="licensee">
			<!-- <legend id="formSubmissionLicensee_label" class="col-sm-2 col-form-label" for="formSubmissionLicensee"><span translate>licensee</span>*</legend> -->
			<!-- <div class="col my-3 view-buttons">
							<button type="button" (click)="formSubmissionLicenseeAddDialog()" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#formSubmissionLicenseeModal">
								<mat-icon>add_box</mat-icon>
							</button>
							<button type="button" (click)="formSubmissionLicenseeClear()" class="btn btn-primary">
								<mat-icon>clear</mat-icon>
							</button>
						</div> -->
			<!-- <div class="row mb-3">
							<label for="formSubmissionLicenseeId" class="col-sm-2 col-form-label" translate>id</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="formSubmissionLicenseeId" value="{{formSubmissionLicensee?.id}}" disabled>
							</div>
						</div> -->
			<!-- <div class="row mb-3">
							<label for="formSubmissionLicenseeUin" class="col-sm-2 col-form-label" translate>uin</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="formSubmissionLicenseeUin" value="{{formSubmissionLicensee?.uin}}" disabled>
							</div>
						</div> -->
			<div class="row mb-3">
			  <label for="formSubmissionLicenseeLicenseeName" class="col-sm-2 col-form-label"
				translate>licensee.name</label>
			  <div class="col-sm-10">
				<input type="text" class="form-control" id="formSubmissionLicenseeLicenseeName"
				  value="{{ formSubmissionLicensee?.licenseeName }}" disabled />
			  </div>
			</div>
			<!-- <div *ngIf="editFormSubmissionForm.invalid && formSubmissionLicenseeControl.invalid && (formSubmissionLicenseeControl.dirty || formSubmissionLicenseeControl.touched)" class="alert alert-danger" role="alert">
							<div *ngIf="formSubmissionLicenseeControl.errors['required']">
								<span translate>licensee.required</span>
							</div>
						</div> -->
		  </fieldset>
		  <div formArrayName="sections" *ngIf="isSingleEntry(); else isMultipleEntry">
			<div *ngFor="let section of formSubmissionSectionsControl.controls; let i = index" [formGroupName]="i">
			  <div>
				<span>
				  {{ getSectionLabel(i) }}
				</span>
			  </div>
			  <div formArrayName="dataFields">
				<div *ngFor="let dataField of getSectorFields(i); let j = index; trackBy: trackByFn" [formGroupName]="j" >
				  <div class="mb-3" *ngIf="isButton(dataField)">
					<input type="button" class="btn btn-primary" value="{{ getDataValue(dataField) }}" />
				  </div>
				  <div class="mb-3" *ngIf="!isHidden(dataField) && isSimpleType(dataField)">
					<label class="form-label">{{ getDataValue(dataField) }}</label>
					<input class="form-control" type="{{ this.getType(dataField) }}" formControlName="value"
					  id="{{ getDataFieldId(dataField) }}"
					  *ngIf="!isTextArea(dataField) && !isSelect(dataField) && !isRange(dataField)" 
					  (change)="onRowChange(section, i)"/>
					<textarea class="form-control" formControlName="value" *ngIf="isTextArea(dataField)" 
					  id="{{ getDataFieldId(dataField) }}"
					  (change)="onRowChange(section, i)"></textarea>
					<select class="form-select" aria-label="Default select example" formControlName="value"
					  *ngIf="isSelect(dataField)">
					  <option selected></option>
					  <option value="1">One</option>
					  <option value="2">Two</option>
					  <option value="3">Three</option>
					</select>
					<input type="range" class="form-range" min="{{ dataField.formField.min }}"
					  id="{{ getDataFieldId(dataField) }}"  formControlName="value"
					  max="{{ dataField.formField.max }}" *ngIf="isRange(dataField)" (change)="onRowChange(section, i)"/>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
		  <ng-template #isMultipleEntry>
			<div class="mb-3">
			  <label id="formSubmissionUpload_label" class="col-sm-2 col-form-label" for="formSubmissionUpload"><span
				  translate>upload</span></label>
			  <input type="file" id="formSubmissionUpload" class="form-control" (change)="onFileSelected($event)" />
			</div>
			<div>
			  <button type="button" class="btn btn-primary" (click)="uploadData()" *ngIf="hasUnsavedDataFields()">
				<mat-icon>upload</mat-icon>
			  </button>
			  <button type="button" class="btn btn-danger" (click)="clearData()" *ngIf="rowGroups.length > 0">
				<mat-icon>clear</mat-icon>
			  </button>
			</div>
			<div *ngIf="rowGroups.length > 0">
			  <mat-table [dataSource]="dataFieldsDataSource" class="table" style="width: 100%">
				<ng-container matColumnDef="status">
				  <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
				  <mat-cell *matCellDef="let group">
					<div *ngIf="!group.saved">
					  <i class="bi bi-x-lg" style="color: red"></i>
					</div>
					<div *ngIf="group.saved">
					  <i class="bi bi-check-lg" style="color: green"></i>
					</div>
				  </mat-cell>
				</ng-container>
				<ng-container *ngFor="let columnId of fieldColumnIds; let x = index" matColumnDef="{{ columnId }}">
				  <mat-header-cell *matHeaderCellDef> {{ getColumnName(columnId) }} </mat-header-cell>
				  <mat-cell *matCellDef="let group"> {{ getColumnValue(columnId, group) }} </mat-cell>
				</ng-container>
				<ng-container matColumnDef="actions">
				  <mat-header-cell *matHeaderCellDef translate>actions</mat-header-cell>
				  <mat-cell *matCellDef="let row; index as i">
					<button type="button" color="accent" (click)="deleteDataRow(i, row)" class="btn btn-primary">
					  <mat-icon>delete</mat-icon>
					</button>
					<button type="button" color="accent" (click)="doEditDataRow(i, row)" class="btn btn-primary">
					  <mat-icon>edit</mat-icon>
					</button>
				  </mat-cell>
				</ng-container>
				<mat-header-row *matHeaderRowDef="actionRowAdded()"></mat-header-row>
				<mat-row *matRowDef="let row; columns: actionRowAdded()"></mat-row>
			  </mat-table>
			  <mat-paginator #dataFieldsPaginator [pageSize]="10"
				[pageSizeOptions]="[5, 10, 20, 30, 40, 50, 60, 70, 80, 90]" showFirstLastButtons
				aria-label="Select page of periodic elements">
			  </mat-paginator>
			</div>
		  </ng-template>
		  <div class="mb-3">
			<label id="formSubmissionSubmissionStatus_label" class="col-sm-2 col-form-label"
			  for="formSubmissionSubmissionStatus"><span translate>submission.status</span>*</label>
			<input type="text" id="formSubmissionSubmissionStatus" class="form-control" name="submissionStatus"
			  formControlName="submissionStatus" required />
			<div *ngIf="
				editFormSubmissionForm.invalid &&
				formSubmissionSubmissionStatusControl.invalid &&
				(formSubmissionSubmissionStatusControl.dirty || formSubmissionSubmissionStatusControl.touched)
			  " class="alert alert-danger" role="alert">
			  <div *ngIf="formSubmissionSubmissionStatusControl.errors['required']">
				<span translate>submission.status.required</span>
			  </div>
			</div>
		  </div>

		  <div class="text-end">
			<button type="button" color="accent" (click)="editFormSubmissionSave()" class="btn btn-outline-primary">
			  <span translate>save</span>
			</button>
			<button type="button" color="accent" (click)="editFormSubmissionDelete()" class="btn btn-outline-primary"  *ngIf="deleteUnrestricted">
			  <span translate>delete</span>
			</button>
			
			<button type="button" color="accent" (click)="editFormSubmissionNote()" class="btn btn-outline-primary">
			  <span translate>note</span>
			</button>
			<button type="button" color="accent" (click)="editFormSubmissionSubmit()" class="btn btn-outline-primary">
			  <span translate>submit</span>
			</button>
			<button color="accent" type="button" (click)="editFormSubmissionFormReset()" class="btn btn-outline-primary">
			  <span translate>reset</span>
			</button>
		  </div>
  
		  <!-- <fieldset class="mb-3" formGroupName="notes">
						<legend id="formSubmissionNotes_label" class="col-sm-2 col-form-label" for="formSubmissionNotes"><span translate>notes</span></legend>
						<input type="text" id="formSubmissionNotes" class="form-control" name="notes" formControlName="id"/>
					</fieldset> -->
		</div>
	  </form>
	</div>
  </div>
  <!-- Modal for period -->
  <div class="modal fade" id="formSubmissionPeriodModal" tabindex="-1" aria-labelledby="formSubmissionPeriodLabel"
	aria-hidden="true">
	<div class="modal-dialog">
	  <div class="modal-content">
		<div class="modal-header">
		  <h5 class="modal-title" id="formSubmissionPeriodAddLabel" translate>
			action.select
			<span translate>period</span>
		  </h5>
		  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		</div>
		<div class="modal-body">
		  <div>
			<form>
			  <div>
				<mat-form-field>
				  <mat-label translate>search</mat-label>
				  <input matInput type="text" [formControl]="formSubmissionPeriodSearchField"
					id="formSubmissionPeriodSearchField" />
				</mat-form-field>
			  </div>
			  <button type="button" (click)="formSubmissionPeriodSearch()" class="btn btn-primary">
				<mat-icon>search</mat-icon>
			  </button>
			</form>
		  </div>
		  <div>
			<mat-table matSort [dataSource]="formSubmissionPeriods$ | async" #formSubmissionPeriodModalSort="matSort"
			  class="table table-bordered" style="width: 100%">
			  <ng-container matColumnDef="actions">
				<mat-header-cell *matHeaderCellDef translate>actions</mat-header-cell>
				<mat-cell *matCellDef="let row; let i = index">
				  <mat-radio-group (change)="formSubmissionPeriodSelected($event, row)">
					<mat-radio-button [value]="row" [checked]="formSubmissionPeriodSelect.id === row.id">
					</mat-radio-button>
				  </mat-radio-group>
				</mat-cell>
			  </ng-container>
			  <ng-container matColumnDef="id">
				<mat-header-cell *matHeaderCellDef translate>id</mat-header-cell>
				<mat-cell *matCellDef="let row"> {{ row.id }} </mat-cell>
			  </ng-container>
			  <ng-container matColumnDef="periodName">
				<mat-header-cell *matHeaderCellDef translate>period.name</mat-header-cell>
				<mat-cell *matCellDef="let row"> {{ row.periodName }} </mat-cell>
			  </ng-container>
			  <ng-container matColumnDef="periodStart">
				<mat-header-cell *matHeaderCellDef translate>period.start</mat-header-cell>
				<mat-cell *matCellDef="let row"> {{ row.periodStart }} </mat-cell>
			  </ng-container>
			  <ng-container matColumnDef="periodEnd">
				<mat-header-cell *matHeaderCellDef translate>period.end</mat-header-cell>
				<mat-cell *matCellDef="let row"> {{ row.periodEnd }} </mat-cell>
			  </ng-container>
			  <mat-header-row *matHeaderRowDef="formSubmissionPeriodModalColumns"></mat-header-row>
			  <mat-row *matRowDef="let row; columns: formSubmissionPeriodModalColumns"></mat-row>
			</mat-table>
			<mat-paginator #formSubmissionPeriodModalPaginator="matPaginator" [pageSize]="10"
			  [pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" translate>action.close</button>
			<button type="button" class="btn btn-primary" (click)="addSelectedFormSubmissionPeriod()"
			  data-bs-dismiss="modal" translate>
			  save
			</button>
		  </div>
		</div>
	  </div>
	</div>
  
	<!-- Modal for licensee -->
	<div class="modal fade" id="formSubmissionLicenseeModal" tabindex="-1" aria-labelledby="formSubmissionLicenseeLabel"
	  aria-hidden="true">
	  <div class="modal-dialog">
		<div class="modal-content">
		  <div class="modal-header">
			<h5 class="modal-title" id="formSubmissionLicenseeAddLabel" translate>
			  action.select
			  <span translate>licensee</span>
			</h5>
			<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		  </div>
		  <div class="modal-body">
			<div>
			  <form>
				<div>
				  <mat-form-field>
					<mat-label translate>search</mat-label>
					<input matInput type="text" [formControl]="formSubmissionLicenseeSearchField"
					  id="formSubmissionLicenseeSearchField" />
				  </mat-form-field>
				</div>
				<button type="button" (click)="formSubmissionLicenseeSearch()" class="btn btn-primary">
				  <mat-icon>search</mat-icon>
				</button>
			  </form>
			</div>
			<mat-table matSort [dataSource]="formSubmissionLicensees$ | async" #formSubmissionLicenseeModalSort="matSort"
			  class="table table-bordered" style="width: 100%">
			  <ng-container matColumnDef="actions">
				<mat-header-cell *matHeaderCellDef translate>actions</mat-header-cell>
				<mat-cell *matCellDef="let row; let i = index">
				  <mat-radio-group (change)="formSubmissionLicenseeSelected($event, row)">
					<mat-radio-button [value]="row" [checked]="formSubmissionLicenseeSelect.id === row.id">
					</mat-radio-button>
				  </mat-radio-group>
				</mat-cell>
			  </ng-container>
			  <ng-container matColumnDef="id">
				<mat-header-cell *matHeaderCellDef translate>id</mat-header-cell>
				<mat-cell *matCellDef="let row"> {{ row.id }} </mat-cell>
			  </ng-container>
			  <ng-container matColumnDef="uin">
				<mat-header-cell *matHeaderCellDef translate>uin</mat-header-cell>
				<mat-cell *matCellDef="let row"> {{ row.uin }} </mat-cell>
			  </ng-container>
			  <ng-container matColumnDef="licenseeName">
				<mat-header-cell *matHeaderCellDef translate>licensee.name</mat-header-cell>
				<mat-cell *matCellDef="let row"> {{ row.licenseeName }} </mat-cell>
			  </ng-container>
			  <mat-header-row *matHeaderRowDef="formSubmissionLicenseeModalColumns"></mat-header-row>
			  <mat-row *matRowDef="let row; columns: formSubmissionLicenseeModalColumns"></mat-row>
			</mat-table>
			<mat-paginator #formSubmissionLicenseeModalPaginator="matPaginator" [pageSize]="10"
			  [pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" translate>action.close</button>
			<button type="button" class="btn btn-primary" (click)="addSelectedFormSubmissionLicensee()"
			  data-bs-dismiss="modal" translate>
			  save
			</button>
		  </div>
		</div>
	  </div>
	</div>
  </div>